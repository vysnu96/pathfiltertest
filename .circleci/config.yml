version: 2.1
parameters:
  first:
    type: boolean
    default: false
jobs:
  build:
    docker:
      - image: cimg/base:2023.02
    resource_class: small
    steps:
      - checkout
      - run: echo "Hi from CircleCI!"
      - run: zip facts.zip *
      - run: ls -ltr && pwd
      # - store_artifacts:
      #     path: /home/circleci/project/facts.zip
      - persist_to_workspace:
          root: /home/circleci/project
          paths:
            - facts.zip

workflows:
  deploy:
    when:
      or:
        - << pipeline.parameters.first >>
    jobs:
      - build:
          filters:  
            branches:
              only:
                - test
