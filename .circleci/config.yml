version: 2.1
parameters:
  first:
    type: boolean
    default: false
  GHA_Event:
    type: string
    default: ""
  GHA_Actor:
    type: string
    default: ""
  GHA_Action:
    type: string
    default: ""
  GHA_Meta:
    type: string
    default: ""
jobs:
  build:
    docker:
      - image: cimg/base:2023.02
    resource_class: small
    steps:
      - run: echo "Hi from CircleCI!"

workflows:
  release:
    when: 
      equal: [release, << pipeline.parameters.GHA_Event >>]
    jobs:
      - build
  deploy:
    when:
      or:
        - << pipeline.parameters.first >>
    jobs:
      - build:
          filters:
            tags:
              only:
                - /^v\d+\.\d+\.\d+$/
